<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Introduction - Arclight Documentation By Chatnaut Cloud Solutions</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

<nav id="sidebar" class="sidebar" aria-label="Table of contents">
    <div class="sidebar-scrollbox">
        <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html" class="active"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="getting_started/ubuntu.html"><strong aria-hidden="true">2.1.</strong> For Ubuntu Server</a></li><li class="chapter-item expanded "><a href="getting_started/centos.html"><strong aria-hidden="true">2.2.</strong> For Centos Server</a></li></ol></li><li class="spacer"></li>
        
        <li class="chapter-item expanded "><a href="encrypt_arclight/index.html"><strong aria-hidden="true">3.</strong> Encrypt Arclight (Optional)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="encrypt_arclight/cert.html"><strong aria-hidden="true">3.1.</strong> Using Let's Encrypt</a></li><li class="chapter-item expanded "><a href="encrypt_arclight/self-cert.html"><strong aria-hidden="true">3.2.</strong> Self-signed certificate</a></li></ol></li>
        
        <li class="chapter-item expanded "><a href="add-storage-pool.html"><strong aria-hidden="true">4.</strong> Add Custom Storage Pools (Optional)</a></li><li class="chapter-item expanded "><a href="iso-images-for-kvm.html"><strong aria-hidden="true">5.</strong> ISO images for KVM machines (Optional)</a></li><li class="spacer"></li>
        
        <li class="chapter-item expanded "><a href="api.html">API Documentation</a></li></ol>
    </div>
    <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
</nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Book of crosvm</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>The Arclight project is a hosted (a.k.a.
<a href="https://en.wikipedia.org/wiki/Hypervisor#Classification">type-1</a>) virtual
machine monitor.</p>
<p>Arclight is a server virtualization management solution based on KVM. It is designed to be a easy-to-use management platform allowing users to create and manage virtual machines (VMs) on Linux servers. Arclight utilizes the Libvirt API, All of the actions you would expect from a virtualization management tool are included in the software. For example, user can create, clone and manage VMs, storage pools networks and volumes. When it comes to networking, there are multiple options available. Users create private networks for there VMs and have the option to control DHCP within the private network. In addition to private networks, VMs can also use bridged connections, connecting them directly to the network interfaces on the physical server. Manage virtual machines directly from Arclight. There is no need to install additional VNC software. [About this project]: This project is in-development and we are still adding features to it along with complete ISO package and APIs for Enterprise Usage. </p>
<p></p>
<ul>
<li><a>Source code</a>
<ul>
<li><a href="https://github.com/Chatnaut/Arclight">GitHub mirror</a></li>
<li><a href="https://google.github.io/Arclight-docs/">API documentation</a>, useful
for searching API.</li>
<li>Full Documentation
<a href="https://google.github.io/Arclight-docs/">/docs/</a>.</li>
</ul>
</li>
<li><a href="https://github.com/Chatnaut/Arclight/issues">Issue tracker</a></li>
</ul>
<p><img src="https://i.imgur.com/G6y7Qov.png" alt="logo" /></p>
<!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="building-crosvm"><a class="header" href="#getting_started">Getting Started</a></h1>
<p>This chapter includes how to set up Arclight on each platform.</p>
<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-for-linux"><a class="header" href="#building-for-linux">Installation on Ubuntu Server</a></h1>
<p>Before installing software, run the <code>sudo apt</code> update command to make sure you are installing from the latest repository information.</p>
<p>Installing the necessary packages On the Ubuntu server, install the QEMU + KVM hypervisor using the following command:</p>
<pre><code class="language-sh">sudo apt install qemu-kvm libvirt-bin</code></pre>

<p>Install the web server, database, and necessary PHP packages to your server. Use the following command:</p>
<pre><code class="language-sh">sudo apt install apache2 mysql-server php libapache2-mod-php php-mysql php-xml php-libvirt-php</code></pre>

<p>The built-in VNC connection requires python. To install it use the following command:</p>
<pre><code class="language-sh">sudo apt install python</code></pre>

<h2 id=""><a class="header" href="">Configuring files and permissions</a></h2>
<P>To use VNC to connect into your virtual machines, you will need to edit the /etc/libvirt/qemu.conf file. Be sure to allow listening on IP address 0.0.0.0 by uncommenting the line #vnc_listen = “0.0.0.0” and saving the file.</P>
<pre><code class="language-sh">sudo nano /etc/libvirt/qemu.conf</code></pre>

<p>The web server user account on Ubuntu is called www-data. This account will need to have permissions to work with libvirt. The group is called libvirtd in Ubuntu 16.04 and libvirt in Ubuntu 18.04. To do this, add the www-data user to the necessary group.</p>
<pre><code class="language-sh">sudo adduser www-data libvirt</code></pre>

<P>Change your directory location to the root directory of your web server. The default location is /var/www/html/ in Ubuntu.</P>
<pre><code class="language-sh">cd /var/www/html</code></pre>

<p>Now download the latest version of Arclight Dashboard to the web root directory.</p>
<pre><code class="language-sh">wget https://github.com/Chatnaut/Arclight/archive/refs/tags/v1.0.0.tar.gz</code></pre>

<p>Extract the downloaded package.</p>
<pre><code class="language-sh">sudo tar -xzf v1.0.0.tar.gz</code></pre>

<p>Rename the extracted directory</p>
<pre><code class="language-sh">sudo mv Arclight-1.0.0 arclight</code></pre>

<p>Change the ownership of the arclight directory to the web server user (www-data).</p>
<pre><code class="language-sh">sudo chown -R www-data:www-data /var/www/html/arclight</code></pre>

<h2 id=""><a class="header" href="">Creating a database</a></h2>
<p>We will need a MySQL database for Arclight Dashboard to work with. To log into MySQL use the following command:</p>
<pre><code class="language-sh">sudo mysql -u root</code></pre>

<p>Once logged in, create a new database. I will name it arclight.</p>
<pre><code class="language-sh">CREATE DATABASE arclight;</code></pre>

<p>Now create a user for Arclight Dashboard to use. You could use the root user and password, but that is never advised. I will create a new user named arclight. Be sure to change the password value.</p>
<pre><code class="language-sh">CREATE USER 'arclight'@'localhost' IDENTIFIED BY 'password';</code></pre>

<p>Change the permissions of the new user to have full access to the database tables.</p>
<pre><code class="language-sh">GRANT ALL PRIVILEGES ON arclight.* to 'arclight'@'localhost';</code></pre>

<p>The new privileges should be applied, but sometimes you will need to flush the privileges so that they can be reloaded into the MySQL database. To do this use the following command:</p>
<pre><code class="language-sh">FLUSH PRIVILEGES;</code></pre>

<p>To exit MySQL, type quit or use the EXIT; statement.</p>
<pre><code class="language-sh">EXIT;</code></pre>

<h2 id=""><a class="header" href="">Connecting to Arclight Dashboard</a></h2>
<p>You will need to restart your server before you can use the hypervisor. This way the server restarts with all the necessary hypervisor software loaded and the user groups applied. Restart Mysql service mysql restart Restart Apache <code>/etc/init.d/apache2 restart</code> | <code>sudo service apache2 restart</code></p>

<p>Once rebooted, use a web browser to navigate to your server’s IP address or domain name. Add /arclight to the end of the URL. For example:<a href="http://192.168.1.2/arclight"> http://192.168.1.2/arclight</a></p>
<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-for-linux"><a class="header" href="#building-for-linux">Installation on CentOS Server</a></h1>
<p>This guide follows a fresh installation of the CentOS 7 minimal server. Before installing packages be sure to update repository information using the following command:</p>
<pre><code class="language-sh">yum update -y</code></pre>

<p>Installing the necessary packages of QEMU + KVM by using the following command:</p>
<pre><code class="language-sh">yum install qemu-kvm libvirt -y</code></pre>

<p>The PHP Libvirt extension is located in the Enterprise Linux repository. To setup this repository use the following command:</p>
<pre><code class="language-sh">yum install epel-release -y</code></pre>

<P>Install the web server, database, and necessary PHP packages to your server. Use the following command:</P>
<pre><code class="language-sh">yum install httpd mariadb-server mariadb php php-mysql php-xml php-libvirt -y</code></pre>

<p>You will need to start and enable the Apache web server and Maria database. To do this use the following commands:</p>
<pre><code class="language-sh">systemctl start mariadb
systemctl enable mariadb
systemctl start httpd
systemctl enable httpd </code></pre>

<h2 id=""><a class="header" href="">Configuring files and permissions</a></h2>
<p>To use VNC to connect into your virtual machines, you will need to edit the /etc/libvirt/qemu.conf file. Be sure to allow listening on IP address 0.0.0.0 by uncommenting the line #vnc_listen = “0.0.0.0” and saving the file.(If nano is not installed you can install it with yum install nano, or just simply use vi instead of nano).</p>
<pre><code class="language-sh">nano /etc/libvirt/qemu.conf</code></pre>

<p>The web server user account on CentOS is called apache. This account will need to have permissions to work with libvirt. We can do this by adding the apache user to the libvirt group. To do this, use the following command:</p>
<pre><code class="language-sh">usermod -a -G libvirt apache</code></pre>

<p>Change your directory location to the root directory of your web server. The default location is /var/www/html/ in Ubuntu.</p>
<pre><code class="language-sh">cd /var/www/html</code></pre>

<p>The minimal installation of CentOS does not come with wget to download files. You will also need git to perform software updates. Install the, using the following command:</p>
<pre><code class="language-sh">yum install wget git -y</code></pre>

<p>Now download the latest version of Arclight Dashboard to the web root directory.</p>
<pre><code class="language-sh">wget https://github.com/arclight/arclight/archive/v1.0.0.tar.gz</code></pre>

<p>Extract the downloaded package.</p>
<pre><code class="language-sh">sudo tar -xzf v1.0.0.tar.gz</code></pre>

<p>Rename the extracted directory</p>
<pre><code class="language-sh">sudo mv arclight-1.0.0 arclight</code></pre>

<p>Change the ownership of the arclight directory to the web server user (www-data).</p>
<pre><code class="language-sh">chown -R apache:apache /var/www/html/arclight</code></pre>

<p>In order for PHP to be able to save configuration files we will need to run the following command:</p>
<pre><code class="language-sh">chown -t httpd_sys_rw_content_t /var/www/html/arclight/ -R</code></pre>

<p>The CentOS firewall will block incoming http and https traffic. Also the VNC connection uses port 6080. To allow the web traffic use the following commands:</p>
<pre><code class="language-sh">
firewall-cmd --permanent --add-service=http
firewall-cmd --permanent --add-service=https
firewall-cmd --permanent --add-port=6080/tcp
systemctl restart firewalld
</code></pre>

<p>SeLinux will block the qemu connection through the web browser. Modify the /etc/sysconfig/selinux file. The default value of the SELINUX=enforcing. Change it to SELINUX=permissive.</p>
<pre><code class="language-sh">nano /etc/sysconfig/selinux</code></pre>

<h2 id=""><a class="header" href="">Creating a database</a></h2>
<p>We will need a MySQL database for Arclight Dashboard to work with. To log into MySQL use the following command:</p>
<pre><code class="language-sh">sudo mysql -u root</code></pre>

<p>Once logged in, create a new database. I will name it arclight.</p>
<pre><code class="language-sh">CREATE DATABASE arclight;</code></pre>

<p>Now create a user for Arclight Dashboard to use. You could use the root user and password, but that is never advised. I will create a new user named arclight. Be sure to change the password value.</p>
<pre><code class="language-sh">CREATE USER 'arclight'@'localhost' IDENTIFIED BY 'password';</code></pre>

<p>Change the permissions of the new user to have full access to the database tables.</p>
<pre><code class="language-sh">GRANT ALL PRIVILEGES ON arclight.* to 'arclight'@'localhost';</code></pre>

<p>The new privileges should be applied, but sometimes you will need to flush the privileges so that they can be reloaded into the MySQL database. To do this use the following command:</p>
<pre><code class="language-sh">FLUSH PRIVILEGES;</code></pre>

<p>To exit MySQL, type quit or use the EXIT; statement.</p>
<pre><code class="language-sh">EXIT;</code></pre>

<h2 id=""><a class="header" href="">Connecting to Arclight Dashboard</a></h2>
<p>You will need to restart your server before you can use the hypervisor. This way the server restarts with all the necessary hypervisor software loaded and the user groups applied. Restart Mysql service mysql restart Restart Apache <code>/etc/init.d/apache2 restart</code> | <code>sudo service apache2 restart</code></p>

<p>Once rebooted, use a web browser to navigate to your server’s IP address or domain name. Add /arclight to the end of the URL. For example:<a href="http://192.168.1.2/arclight"> http://192.168.1.2/arclight</a></p>

<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<div style="break-before: page; page-break-before: always;"></div>                        <h1 id="building-crosvm"><a class="header" href="#getting_started">Encrypt Arclight</a></h1>
<p>This chapter includes how to encrypt Arclight console either using Let's Encrypt or by Self-signed certificate</p>

<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<div style="break-before: page; page-break-before: always;"></div><h1 id="onboarding-resources"><a class="header" href="#onboarding-resources">Encrypting Arclight with Let’s Encrypt</a></h1>
<p>As a security recommendation, it is always a good practice to encrypt the data sent across the Internet. You can encrypt both your arclight connection as well as the VNC console connection to your virtual machines.
With the Apache web server on Ubuntu you can enable HTTPS traffic using the following command:</p>
<pre><code class="language-sh">sudo a2enmod ssl</code></pre>

<p>If you are using a domain name, you can use a Certificate Authority such as Let’s Encrypt to create a free validated SSL certificate. To get started we will need to create an Apache site configuration file for your domain. I will using the domain server1.arclight.org for this example. The new config file should end with the .conf extension and be located in the <code>/etc/apache2/sites-available/</code> directory. To create a new file for your domain use the following command, and be sure to change the domain name:</p>
<pre><code class="language-sh">sudo nano /etc/apache2/sites-available/server1.arclight.org.conf</code></pre>

<p>We will just be adding just the minimum information in the configuration file. The first line below < VirtualHost *:80> tells Apache that this configuration file will be used for HTTP traffic. When we configure Let’s Encrypt, the HTTPS connection (port 443) will be configured automatically. The second line ServerName server1.arclight.org tells Apache what domain name it should be listening for to apply this configuration. The third line DocumentRoot <code>/var/www/html/arclight/</code> indicates the root location of the web site files and that should be the filepath for your files.</p>
<p>< VirtualHost *:80> ServerName server1.arclight.org DocumentRoot <code>/var/www/html/arclight/</code></p>
<p>Once you add the above information to the configuration file and save it, we will then need to enable the configuration file in Apache using the a2ensite command. To do that run the following command, be sure to use your domain name:</p>
<pre><code class="language-sh">sudo a2ensite server1.arclight.org</code></pre>

<p>When Apache is only used for the arclight it would be a good idea to disable the default configuration file that comes with the install of Apache. To do that use the command:</p>
<pre><code class="language-sh">sudo a2dissite 000-default.conf</code></pre>

<p>You will need to restart/reload the Apache web server to apply the configuration changes. Use the following command:</p>
<pre><code class="language-sh">sudo systemctl reload apache2</code></pre>

<p>To automate the Let’s Encrypt certificate using Apache we will need to install the python-certbot-apache package. Use the following command:</p>
<pre><code class="language-sh">sudo apt install python-certbot-apache</code></pre>

<p>To create the SSL Certificate and Apache configuration file run the following command, changing your domain name. You will be asked for an email address and you will be given an option to either redirect all traffic to the HTTPS protocol or not.</p>
<pre><code class="language-sh">sudo certbot --apache -d server1.arclight.org</code></pre>

<p>Now login to your Arclight Dashboard. Go to the settings page and add the location of the Let’s Encrypt certificate file and key file and submit your changes. Below is the location created for server1.arclight.org

    Certificate file: <code>/etc/letsencrypt/live/server1.arclight.org/fullchain.pem</code> Key file: <code>/etc/letsencrypt/live/server1.arclight.org/privkey.pem</code>
    
    The permissions for the certificates are tied to the root user. There will need to be a permission change on the /etc/letsencrypt/live folder as well as /etc/letsencrypt/archive. We can change the permission to 755 (rwxr-xr-x) to allow the Arclight to be able to read the information. Run the following commands:</p>
<pre><code class="language-sh">sudo chmod 755 /etc/letsencrypt/live</code></pre>
<pre><code class="language-sh">sudo chmod 755 /etc/letsencrypt/archive</code></pre>

<p>You can either decide to restart your server or restart the python process tied to noVNC to apply the certificate and key files. If you decide to restart the service you should be able to determine which process id (PID) is using port 6080. Use the following command:</p>
<pre><code class="language-sh">sudo netstat -tulpn | grep 6080</code></pre>

<p>Then after determining the PID number, kill the process. For example, if it was PID 1386, I would use the command:</p>
<pre><code class="language-sh">sudo kill 1386</code></pre>

<p>Now logout and login to the arclight to restart the VNC connection and the new certificate should be applied.</p>

<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<div style="break-before: page; page-break-before: always;"></div><h1 id="onboarding-resources"><a class="header" href="#onboarding-resources">Encrypting Arclight with self-signed certificate</a></h1>
<p>As a security recommendation, it is always a good practice to encrypt your the data sent across the Internet. You can encrypt both your arclight connection as well as the VNC connection to your virtual machines.With the Apache web server on Ubuntu you can enable https traffic using the following command:</p>
<pre><code class="language-sh">sudo a2enmod ssl</code></pre>

<p>Ubuntu has a configuration already setup to be used with a self-signed certificate. It can be activated by using the following command:</p>
<pre><code class="language-sh">sudo a2ensite default-ssl.conf</code></pre>

<p>You will need to restart/reload the Apache web server to apply the SSL connection. Use the following command:</p>
<pre><code class="language-sh">sudo systemctl restart apache2</code></pre>

<p>The VNC connection will default to using the protocol of you web connection. If you wish to use https with VNC you will need to create a certificate. By default, the noVNC app that comes with arclight looks for a cert called self.pem in the <code>/etc/ssl/</code> directory.To create the certificate for the VNC connection navigate to the <code>/etc/ssl/</code> directory.</p>
<pre><code class="language-sh">cd /etc/ssl/</code></pre>

<p>Create the certificate by using the following command:</p>
<pre><code class="language-sh">sudo openssl req -x509 -days 365 -new -nodes -out self.pem -keyout self.pem</code></pre>

<p>Now change the permissions of the self.pem file</p>
<pre><code class="language-sh">sudo chmod 755 self.pem</code></pre>

<p>If you have already used arclight, you will need to kill the existing VNC process. To determine the process to kill use netstat and determine the process number that is listening on port 6080.</p>
<pre><code class="language-sh">sudo netstat -tulpn | grep 6080</code></pre>

<p>Now kill the process. For example if the process was numbered 29226, you would kill it using the command:</p>
<pre><code class="language-sh">sudo kill 29226</code></pre>

<p>Now when you log into arclight, the VNC software will use the self-signed cert. Because it is self-signed your browser will not trust it. To trust the certification visit your URL:6080 and click the Advanced button on the screen. For example, if you were using 192.168.1.2 to view the web interface you should use <a href=""> https://192.168.1.2:6080.</a></p>

<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<div style="break-before: page; page-break-before: always;"></div><h1 id="architecture"><a class="header" href="#architecture">Add Custom Storage Pools</a></h1>
<p>Using arclight, you can define Libvirt storage pools in the /var, /mnt, and /media directories. This was done to prevent full access to the operating system from the Web interface. If you need to define a storage pool outside of these limitations, you can use the terminal using Libvirt to register a storage pool. In this example we will define the /home/ubuntu/ directory as a storage pool.</p>

<p>Define the storage pool using the pool-define-as command from virsh. We will pass in the type of storage devices which is a directory, name which we will call myHomePool, and the filepath to the storage pool.</p>

<pre><code class="language-sh">virsh pool-define-as --type dir --name myHomePool --target /home/ubuntu
</code></pre>

<p>The storage pool will now show up in arclight. If you wish to view it in the terminal you can use the following command</p>
<pre><code class="language-sh">virsh pool-list --all</code></pre>

<p>The storage pool myHomePool will not be running, you can start it using arclight, or in the terminal you can use the following command to start the storage pool. Optionally you can use pool-autostart to automatically start the pool upon the system boot and use pool-autostart –disable to remove it.</p>
<pre><code class="language-sh">virsh pool-start myHomePool</code></pre>

<p>If you choose to stop the storage pool from running, you can do this in arclight or by using the pool-destroy option.</p>
<pre><code class="language-sh">virsh pool-destroy myHomePool</code></pre>

<p>Lastly if you decide to remove the storage pool you can undefine it. This will leave the directory intact on the operating system, just removing it from the list of storage pools. Again, this can be done in arclight or by using the pool-undefine option in the terminal.</p>
<pre><code class="language-sh">virsh pool-undefine myHomePool</code></pre>

<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<div style="break-before: page; page-break-before: always;"></div><h1 id="contributing"><a class="header" href="#contributing">ISO images for KVM machines</a></h1>
<!-- <h2 id="intro"><a class="header" href="#intro">Intro</a></h2> -->
<p>When getting started with KVM virtual machines, one common question is how do I get ISO image files used to install the operating systems in the virtual machines. The default location that Libvirt uses as a storage pool for KVM virtual machines is the <code>/var/lib/libvirt/images/</code> directory. You will need to download the ISO files using a command such as wget. Find the URL of the ISO from from the vendor, for example <a href="http://releases.ubuntu.com/18.04.1/ubuntu-18.04.1-live-server-amd64.iso">http://releases.ubuntu.com/18.04.1/ubuntu-18.04.1-live-server-amd64.iso</a></p>

<p>You will need to switch your user account to the root user: Navigate to the <code>/var/lib/libvirt/images/</code> directory:</p>
<pre><code class="language-bash">cd /var/lib/libvirt/images/</code></pre>

<p>Use wget to download the file:</p>
<pre><code class="language-bash">wget http://releases.ubuntu.com/18.04.1/ubuntu-18.04.1-live-server-amd64.iso</code></pre>

<p>The ISO file will now show up in arclight.</p>

<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<div style="break-before: page; page-break-before: always;"></div><h1 id="api-document"><a class="header" href="#api-document">API Documentation</a></h1>
<p>Total number of functions: 159. Functions supported are:</p>

<p>libvirt_get_last_error()</p>

<p>libvirt_connect($url, $readonly, $credentials)</p>

<p>libvirt_node_get_info($conn)</p>

<p>libvirt_node_get_cpu_stats($conn, $cpunr)</p>

<p>libvirt_node_get_cpu_stats_for_each_cpu($conn, $time)</p>

<p>libvirt_node_get_mem_stats($conn)</p>

<p>libvirt_connect_get_machine_types($conn)</p>

<p>libvirt_connect_get_information($conn)</p>

<p>libvirt_connect_get_uri($conn)</p>

<p>libvirt_connect_get_hostname($conn)</p>

<p>libvirt_image_create($conn, $name, $size, $format)</p>

<p>libvirt_image_remove($conn, $image)</p>

<p>libvirt_connect_get_hypervisor($conn)</p>

<p>libvirt_connect_is_encrypted($conn)</p>

<p>libvirt_connect_is_secure($conn)</p>

<p>libvirt_connect_get_all_domain_stats($conn, $stats, $flags)</p>

<p>libvirt_connect_get_maxvcpus($conn)</p>

<p>libvirt_connect_get_sysinfo($conn)</p>

<p>libvirt_domain_get_counts($conn)</p>

<p>libvirt_domain_is_persistent($res)</p>

<p>libvirt_domain_set_max_memory($res, $memory)</p>

<p>libvirt_domain_set_memory($res, $memory)</p>

<p>libvirt_domain_set_memory_flags($res, $memory, $flags)</p>

<p>libvirt_domain_get_autostart($res)</p>

<p>libvirt_domain_set_autostart($res, $flags)</p>

<p>libvirt_domain_get_metadata($res, $type, $uri, $flags)</p>

<p>libvirt_domain_set_metadata($res, $type, $metadata, $key, $uri, $flags)</p>

<p>libvirt_domain_is_active($res)</p>

<p>libvirt_domain_lookup_by_name($res, $name)</p>

<p>libvirt_domain_lookup_by_uuid($res, $uuid)</p>

<p>libvirt_domain_qemu_agent_command($res, $cmd, $timeout, $flags)</p>

<p>libvirt_domain_lookup_by_uuid_string($res, $uuid)</p>

<p>libvirt_stream_create($res)</p>

<p>libvirt_stream_close($res)</p>

<p>libvirt_stream_abort($res)</p>

<p>libvirt_stream_finish($res)</p>

<p>libvirt_stream_recv($res, $data, $len)</p>

<p>libvirt_stream_send($res, $data, $length)</p>

<p>libvirt_domain_lookup_by_id($conn, $id)</p>

<p>libvirt_domain_get_name($res)</p>

<p>libvirt_domain_get_uuid_string($res)</p>

<p>libvirt_domain_get_screenshot_api($res, $screenID)</p>

<p>libvirt_domain_get_screenshot($res, $server, $scancode)</p>

<p>libvirt_domain_get_screen_dimensions($res, $server)</p>

<p>libvirt_domain_send_keys($res, $server, $scancode)</p>

<p>libvirt_domain_send_pointer_event($res, $server, $pos_x, $pos_y, $clicked, $release)</p>

<p>libvirt_domain_get_uuid($res)</p>

<p>libvirt_domain_get_id($res)</p>

<p>libvirt_domain_get_next_dev_ids($res)</p>

<p>libvirt_connect_get_capabilities($conn, $xpath)</p>

<p>libvirt_connect_get_emulator($conn, $arch)</p>

<p>libvirt_connect_get_nic_models($conn, $arch)</p>

<p>libvirt_connect_get_soundhw_models($conn, $arch, $flags)</p>

<p>libvirt_domain_new($conn, $name, $arch, $memMB, $maxmemMB, $vcpus, $iso_image, $disks, $networks, $flags)</p>

<p>libvirt_domain_new_get_vnc()</p>

<p>libvirt_domain_get_xml_desc($res, $xpath)</p>

<p>libvirt_domain_get_disk_devices($res)</p>

<p>libvirt_domain_get_interface_devices($res)</p>

<p>libvirt_domain_change_vcpus($res, $numCpus, $flags)</p>

<p>libvirt_domain_change_memory($res, $allocMem, $allocMax, $flags)</p>

<p>libvirt_domain_change_boot_devices($res, $first, $second, $flags)</p>

<p>libvirt_domain_disk_add($res, $img, $dev, $typ, $driver, $flags)</p>

<p>libvirt_domain_disk_remove($res, $dev, $flags)</p>

<p>libvirt_domain_nic_add($res, $mac, $network, $model, $flags)</p>

<p>libvirt_domain_nic_remove($res, $dev, $flags)</p>

<p>libvirt_domain_get_info($res)</p>

<p>libvirt_domain_create($res)</p>

<p>libvirt_domain_destroy($res)</p>

<p>libvirt_domain_resume($res)</p>

<p>libvirt_domain_core_dump($res, $to)</p>

<p>libvirt_domain_shutdown($res)</p>

<p>libvirt_domain_managedsave($res)</p>

<p>libvirt_domain_suspend($res)</p>

<p>libvirt_domain_undefine($res)</p>

<p>libvirt_domain_reboot($res, $flags)</p>

<p>libvirt_domain_define_xml($conn, $xml)</p>

<p>libvirt_domain_create_xml($conn, $xml)</p>

<p>libvirt_domain_memory_peek($res, $start, $size, $flags)</p>

<p>libvirt_domain_memory_stats($res, $flags)</p>

<p>libvirt_domain_update_device($res, $xml, $flags)</p>

<p>libvirt_domain_block_stats($res, $path)</p>

<p>libvirt_domain_block_resize($res, $path, $size, $flags)</p>

<p>libvirt_domain_block_commit($res, $disk, $base, $top, $bandwidth, $flags)</p>

<p>libvirt_domain_block_job_abort($res, $path, $flags)</p>

<p>libvirt_domain_block_job_set_speed($res, $path, $bandwidth, $flags)</p>

<p>libvirt_domain_get_network_info($res, $mac)</p>

<p>libvirt_domain_get_block_info($res, $dev)</p>

<p>libvirt_domain_xml_xpath($res, $xpath, $flags)</p>

<p>libvirt_domain_interface_stats($res, $path)</p>

<p>libvirt_domain_get_connect($res)</p>

<p>libvirt_domain_migrate_to_uri($res, $dest_uri, $flags, $dname, $bandwidth)</p>

<p>libvirt_domain_migrate_to_uri2($res, $dconnuri, $miguri, $dxml, $flags, $dname, $bandwidth)</p>

<p>libvirt_domain_migrate($res, $dest_conn, $flags, $dname, $bandwidth)</p>

<p>libvirt_domain_get_job_info($res)</p>

<p>libvirt_domain_has_current_snapshot($res, $flags)</p>

<p>libvirt_domain_snapshot_lookup_by_name($res, $name, $flags)</p>

<p>libvirt_domain_snapshot_create($res, $flags)</p>

<p>libvirt_domain_snapshot_get_xml($res, $flags)</p>

<p>libvirt_domain_snapshot_revert($res, $flags)</p>

<p>libvirt_domain_snapshot_delete($res, $flags)</p>

<p>libvirt_list_domain_snapshots($res, $flags)</p>

<p>libvirt_storagepool_lookup_by_name($res, $name)</p>

<p>libvirt_storagepool_lookup_by_volume($res)</p>

<p>libvirt_storagepool_list_volumes($res)</p>

<p>libvirt_storagepool_get_info($res)</p>

<p>libvirt_storagevolume_lookup_by_name($res, $name)</p>

<p>libvirt_storagevolume_lookup_by_path($res, $path)</p>

<p>libvirt_storagevolume_get_name($res)</p>

<p>libvirt_storagevolume_get_path($res)</p>

<p>libvirt_storagevolume_get_info($res)</p>

<p>libvirt_storagevolume_get_xml_desc($res, $xpath, $flags)</p>

<p>libvirt_storagevolume_create_xml($res, $xml, $flags)</p>

<p>libvirt_storagevolume_create_xml_from($pool, $xml, $original_volume)</p>

<p>libvirt_storagevolume_delete($res, $flags)</p>

<p>libvirt_storagevolume_resize($res, $capacity, $flags)</p>

<p>libvirt_storagevolume_download($res, $stream, $offset, $length, $flags)</p>

<p>libvirt_storagevolume_upload($res, $stream, $offset, $length, $flags)</p>

<p>libvirt_storagepool_get_uuid_string($res)</p>

<p>libvirt_storagepool_get_name($res)</p>

<p>libvirt_storagepool_lookup_by_uuid_string($res, $uuid)</p>

<p>libvirt_storagepool_get_xml_desc($res, $xpath)</p>

<p>libvirt_storagepool_define_xml($res, $xml, $flags)</p>

<p>libvirt_storagepool_undefine($res)</p>

<p>libvirt_storagepool_create($res)</p>

<p>libvirt_storagepool_destroy($res)</p>

<p>libvirt_storagepool_is_active($res)</p>

<p>libvirt_storagepool_get_volume_count($res)</p>

<p>libvirt_storagepool_refresh($res, $flags)</p>

<p>libvirt_storagepool_set_autostart($res, $flags)</p>

<p>libvirt_storagepool_get_autostart($res)</p>

<p>libvirt_storagepool_build($res)</p>

<p>libvirt_storagepool_delete($res)</p>

<p>libvirt_list_storagepools($res)</p>

<p>libvirt_list_active_storagepools($res)</p>

<p>libvirt_list_inactive_storagepools($res)</p>

<p>libvirt_list_domains($res)</p>

<p>libvirt_list_domain_resources($res)</p>

<p>libvirt_list_active_domain_ids($res)</p>

<p>libvirt_list_active_domains($res)</p>

<p>libvirt_list_inactive_domains($res)</p>

<p>libvirt_list_networks($res, $flags)</p>

<p>libvirt_list_nodedevs($res, $cap)</p>

<p>libvirt_nodedev_get($res, $name)</p>

<p>libvirt_nodedev_capabilities($res)</p>

<p>libvirt_nodedev_get_xml_desc($res, $xpath)</p>

<p>libvirt_nodedev_get_information($res)</p>

<p>libvirt_network_define_xml($res, $xml)</p>

<p>libvirt_network_undefine($res)</p>

<p>libvirt_network_get($res, $name)</p>

<p>libvirt_network_get_bridge($res)</p>

<p>libvirt_network_get_active($res)</p>

<p>libvirt_network_get_information($res)</p>

<p>libvirt_network_set_active($res, $flags)</p>

<p>libvirt_network_get_xml_desc($res, $xpath)</p>

<p>libvirt_version($type)</p>

<p>libvirt_check_version($major, $minor, $micro, $type)</p>

<p>libvirt_has_feature($name)</p>

<p>libvirt_get_iso_images($path)</p>

<p>libvirt_print_binding_resources()</p>

<p>libvirt_logfile_set($filename, $maxsize)</p><p>Full Libvirt API Documentation is available at <a href="https://libvirt.org/php/api-reference.html">here</a>.</p>


                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
